# k-trader

BitThumb 거래소용 Bitcoin 자동 매매 Android app 프로그램입니다.
#

* 기본 전략
1. 투자금을 100등분 한 금액(Unit price)을 매수/매도 단위로 함 (예: 투자금 1억인 경우 매수/매도 단위는 100만원)
2. Bitcoin 현재가에서 1,000만원 단위 미만을 절사한 금액의 (예: 현재가 4,532만원 -> 4,000만원) 0.5% 변동시 거래가 발생하도록 함
3. 매수가 발생하면 매수가+1% 금액으로 바로 매도를 예약함 (매 매수마다 +1% 수익 목표)
4. 매수/매도 주문은 1분에 한번 스케줄링 됨
5. 한 번 스케줄링 될 때 최대 1번의 매수 주문만 내도록 함 (혹시 모를 버그로 인한 올인 상황 방지 목적)
#

* 기본 전략의 의의
1. 현재가 대비 0.5% 하락시마다 매수하게 되므로 최대 100회 매수가 가능하게 되고 이는 최고가 대비 약 50% 하락을 견딜 수 있음
2. 최고가와 최고가-50% 사이에서 지속적으로 변동시 매수 건당 Unit price의 1%씩 이익이 쌓여가는 구조이며 최고가-50% 이하로 하락할 시에는 추가금 투입이 필요함
3. 투자 성향에 따라 전체 투자금, Unit price, Unit당 수익률을 조절 할 수 있고 이에 따라 최종 수익이 예측 가능해진다는 장점이 있음
#

* 부가 전략
1. 최고가를 돌파하며 상승하는 경우 매도할 항목이 한 개도 남아 있지 않을 상황을 대비해 최대 3개의 매도 항목을 유지할 수 있도록 현재가 근처에서 매수 진행함
#

* 최고가를 다시 Touch하지 못할 것 같은 상황에 대한 전략 (미구현)
1. 최고가에 매도 예약된 항목을 수익금의 일부를 사용해서 녹인다.
#

* 추가 투입 가능 금액 없는 상태에서 최고가-50% 이상 하락 상황에 대한 전략 (미구현)
1. 거래를 지속 발생시키는 것이 유리하므로 최고가 매도 항목을 우선 매도해서 매수 가능 금액 확보
#

* Known issues
1. 특정가에 100만원 매수를 걸어 두었을 때 매수 체결이 거래소 물량 상황에 따라 2회 이상에 걸쳐 나눠서 발생할 수 있는데 이를 합쳐서 매도를 걸어주지 않고 첫번째 체결만 매도함
   - 두번째 이상 체결분은 현재 수동 처리 필요
2. 1분 이내 0.5% 이상의 급락이 발생한 경우 매수 구간이 skip될 수 있음
   - 예를 들어 3% 급락시 이론상 0.5%씩 6개의 매수가 발생해야 하지만 한 턴에 하나의 매수만 발생시키므로 6개 아닌 1개 매수만 발생
3. Back key로는 app이 종료되지 않으나 Task manager에서 종료할 경우 실제 종료되어 이후 거래가 되지 않으므로 실수로 종료하지 않도록 주의 필요
   - Background process로 구현 필요
4. Android 소모 전류 정책에 따라 1분 스케줄링이 pause될 수 있음
   - 1분 스케줄링을 FireBase message로 변경 필요
   - 충전 중일 때는 정상 동작
5. Fold 모델에서 화면을 펼치면 프로그램 종료되므로 외부 스크린에서만 운영 필요
#

* Tip
1. 거래 금액에 따른 수수료 쿠폰 구매 추천
   - 구매한 쿠폰이 60일만 유효하므로 지속적으로 평균 거래 금액 모니터링 필요
#

* UI 구성
1. 메인 화면
<img src="/doc/main_screen.png" width="150" height="300"/>
2. 거래 대기 목록 화면
   - 리스트 최상위에는 매수 대기 item 1개와 그 하위에는 매도 대기 item의 list로 구성
<img src="/doc/order_screen.png" width="150" height="300"/>
3. 거래 완료 목록 화면
   - 기간별 누적 거래량과 수수료 총합을 볼 수 있게 구성
<img src="/doc/history_screen.png" width="150" height="300"/>
4. 세팅 화면
   - API secret, key, unit price를 설정할 수 있도록 구성
<img src="/doc/setting_screen.png" width="150" height="300"/>

이상입니다.
