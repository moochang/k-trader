# k-trader

BitThumb 거래소용 Bitcoin 자동 매매 Android app 프로그램입니다.
#

* UI 구성
1. 메인 화면
   - 거래 시작/종료 버튼, 세팅 화면 버튼으로 구성
   - <img src="/doc/main_screen.jpg" width="150" height="300"/>
2. 거래 대기 목록 화면
   - 리스트 최상위에는 매수 대기 item 1개와 그 하위에는 매도 대기 item의 list로 구성
   - <img src="/doc/order_screen.jpg" width="150" height="300"/>
3. 거래 완료 목록 화면
   - 기간별 누적 거래량과 수수료 총합을 볼 수 있게 구성
   - <img src="/doc/history_screen.jpg" width="150" height="300"/>
4. 세팅 화면
   - API secret, key, unit price를 설정할 수 있도록 구성
   - <img src="/doc/setting_screen.jpg" width="150" height="300"/>
#

* 사용법
1. 빗썸 사이트에서 API_KEY와 API_SECRET 값을 생성 (보안을 위해 입출금 권한은 빼는 것 추천)
2. 빗썸 사이트에서 투자금 입금 (빗썸 최소 거래 단위가 1,000원 이므로 *100인 10만원이상 추천)
3. App실행 후 세팅 화면으로 가서 API_KEY와 API_SECRET, 거래 단위 금액 값을 입력
   - 거래 단위 금액은 '10만원', '100만원' 검증 완료, 그 외 금액은 검증 필요
4. 세팅 화면 이외 화면들간 전환은 좌우 Flick을 사용하며 화면 전환을 위한 별도 UI는 없음
5. 메인화면에서 거래 시작 버튼을 누르면 1분 마다 자동 거래 동작
6. App이 Terminate되지 않도록 주기적으로 모니터링 해주면 됨
   - 메인 화면의 로그 창에서 오류가 없는지도 모니터링 필요
#

* Known issues
1. Back key로는 app이 종료되지 않으나 Task manager에서 종료할 경우 실제 종료되어 이후 거래가 되지 않으므로 실수로 종료하지 않도록 주의 필요
   - Background process로 구현 필요 (미구현)
2. Android 소모 전류 정책에 따라 1분 스케줄링이 pause될 수 있음
   - 1분 스케줄링을 내부 타이머가 아닌 FireBase message로 변경 필요 (미구현)
   - 충전 중일 때는 정상 동작하므로 자기 전에는 충전 추천
3. 아침에 일어나서 App을 실행해보면 메인 화면의 'Start trading' 버튼이 다시 활성화 되어 있는 경우가 있음
   - 아직 원인 불명, 거래에는 문제가 없어서 그냥 버튼만 다시 눌러주면 됨
4. 특정가에 매수를 걸어 두었을 때 매수 체결이 거래소 물량 상황에 따라 2회 이상에 걸쳐 나눠서 발생할 수 있는데 이를 합쳐서 매도를 걸어주지 않고 첫번째 체결된 매수건만 매도함
   - 두번째 이상 체결분은 현재 수동 처리 필요
5. 1분 이내 0.5% 이상의 급락이 발생한 경우 매수 구간이 skip될 수 있음
   - 예를 들어 3% 급락시 이론상 0.5%씩 6개의 매수가 발생해야 하지만 한 턴에 하나의 매수만 발생시키므로 6개가 아닌 1개 매수만 발생
6. Fold 모델에서 화면을 펼치면 프로그램 종료되므로 외부 스크린에서만 운영 필요
7. 가끔 빗썸 서버에서 잔고를 읽어오지 못하는 문제 발생(두어달에 한번 정도?)
   - 안드로이드 네트웍 쪽 문제로 보이는데 원인 불명, App 재실행으로 해결되지 않고 폰 리부팅 필요
#

* 기본 전략
1. 투자금을 100등분 한 금액(Unit price)을 매수/매도 단위로 함 (예: 투자금 1억인 경우 매수/매도 단위는 100만원)
2. Bitcoin 현재가에서 1,000만원 단위 미만을 절사한 금액의 (예: 현재가 4,532만원 -> 4,000만원) 0.5% 변동시 거래가 발생하도록 함
3. 매수가 발생하면 매수가+1% 금액으로 바로 매도를 예약함 (매 매수마다 +1% 수익 목표)
4. 매수/매도 주문은 1분에 한번 스케줄링 됨
5. 한 번 스케줄링 될 때 최대 1번의 매수 주문만 내도록 함 (혹시 모를 버그로 인한 올인 상황 방지 목적)
#

* 기본 전략의 의의
1. 현재가 대비 0.5% 하락시마다 매수하게 되므로 최대 100회 매수가 가능하게 되고 이는 최고가 대비 약 50% 하락을 견딜 수 있음
2. 최고가와 최고가-50% 사이에서 지속적으로 변동시 매수 건당 Unit price의 1%씩 이익이 쌓여가는 구조이며 최고가-50% 이하로 하락할 시에는 추가금 투입이 필요함
   - 비트코인은 변동성이 커서 -50% 하락이 심심치 않게 발생하므로 투자금으로 올인하지 말고 예비금을 준비하고(최소 투자금의 50% 이상 추천), 예비금은 예금 등 안전자산으로 운영 추천
4. 투자 성향에 따라 전체 투자금, Unit price, Unit당 수익률을 조절 할 수 있고 이에 따라 최종 수익이 예측 가능해진다는 장점이 있음
#

* 부가 전략
1. 최고가를 돌파하며 상승하는 경우 매도할 항목이 한 개도 남아 있지 않을 상황을 대비해 최대 3개의 매도 항목을 유지할 수 있도록 현재가 근처에서 매수 진행함
#

* 최고가를 다시 Touch하지 못할 것 같은 상황에 대한 전략 (미구현)
1. 최고가에 매도 예약된 항목을 수익금의 일부를 사용해서 녹인다.
2. 투자금+예비금까지를 1:2:3으로 등분 해서 '1' 부분으로 50% 하락 커버하며 중점 투자, 추가 하락 할수록 '2' -> '3'으로 투자금을 늘리는 전략
   - 비트코인은 반등도 큰 경우가 많아 추가 하락시 이익을 극대화 할 수 있지만, 반면에 중점 투자 비중이 적어지므로 개인 성향에 따른 선택 필요
#

* 추가 투입 가능 금액 없는 상태에서 최고가-50% 이상 하락 상황에 대한 전략 (미구현)
1. 거래를 지속 발생시키는 것이 유리하므로 최고가 매도 항목을 우선 매도해서 매수 가능 금액 확보
#

* Tip
1. 거래 금액에 따른 수수료 쿠폰 구매 추천
   - 구매한 쿠폰이 60일만 유효하므로 지속적으로 평균 거래 금액 모니터링 필요
#

이상입니다.
